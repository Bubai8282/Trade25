{"ast":null,"code":"import React,{useState,useEffect}from'react';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer,BarChart,Bar,PieChart,Pie,Cell}from'recharts';import UserManagement from'./UserManagement';import StockScreening from'./StockScreening';import UserManagementTab from'./UserManagementTab';import StockManagementTab from'./StockManagementTab';import SubscriptionManagementTab from'./SubscriptionManagementTab';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=_ref=>{let{initialData}=_ref;const[activeTab,setActiveTab]=useState('overview');const[stats,setStats]=useState({});const[users,setUsers]=useState([]);const[stocks,setStocks]=useState([]);const[subscriptionRequests,setSubscriptionRequests]=useState([]);const[loading,setLoading]=useState(true);const[screenings,setScreenings]=useState([]);// Entry Zone and Breakout Stocks state\nconst[entryZoneStocks,setEntryZoneStocks]=useState([]);const[breakoutStocks,setBreakoutStocks]=useState([]);const COLORS=['#0088FE','#00C49F','#FFBB28','#FF8042'];// Prepare data for charts\nconst subscriptionData=[{name:'Free',value:stats.free_users,color:'#6c757d'},{name:'Medium',value:stats.medium_users,color:'#17a2b8'},{name:'Pro',value:stats.pro_users,color:'#28a745'}];const userGrowthData=[{month:'Jan',users:Math.floor(stats.total_users*0.6)},{month:'Feb',users:Math.floor(stats.total_users*0.7)},{month:'Mar',users:Math.floor(stats.total_users*0.8)},{month:'Apr',users:Math.floor(stats.total_users*0.9)},{month:'May',users:stats.total_users}];// Wrapper for refreshing data\nconst refreshData=()=>loadAdminData();// Load admin data on component mount\nuseEffect(()=>{loadAdminData();},[]);const loadAdminData=async()=>{setLoading(true);try{// Load admin statistics\nconst statsResponse=await fetch('/admin/api/dashboard-data');if(statsResponse.ok){var _statsData$data;const statsData=await statsResponse.json();setStats(((_statsData$data=statsData.data)===null||_statsData$data===void 0?void 0:_statsData$data.stats)||{});}// Load users for management\nconst usersResponse=await fetch('/admin/api/users');if(usersResponse.ok){const usersData=await usersResponse.json();setUsers(usersData.users||[]);}// Load subscription requests\nconst requestsResponse=await fetch('/admin/api/subscription-requests');if(requestsResponse.ok){const requestsData=await requestsResponse.json();setSubscriptionRequests(requestsData.requests||[]);}// Load stock data\nconst stocksResponse=await fetch('/admin/api/stocks');if(stocksResponse.ok){const stocksData=await stocksResponse.json();setStocks(stocksData.stocks||[]);}// Load recent screenings\nconst screeningsResponse=await fetch('/admin/api/recent-screenings');if(screeningsResponse.ok){const screeningsData=await screeningsResponse.json();setScreenings(screeningsData.screenings||[]);}}catch(error){console.error('Failed to load admin data:',error);}setLoading(false);};const handleLogout=async()=>{try{// Try mock logout first\nconst mockResponse=await fetch('/api/mock/logout',{method:'POST'});if(!mockResponse.ok){// Try admin logout\nawait fetch('/admin/logout',{method:'POST'});}}catch(error){console.error('Logout failed:',error);}finally{// Always redirect to login\nwindow.location.href='/admin/login';}};const handleSubscriptionRequest=async(requestId,action)=>{try{const response=await fetch(\"/admin/subscription-requests/\".concat(requestId,\"/\").concat(action),{method:'POST',headers:{'Content-Type':'application/json'}});const data=await response.json();if(response.ok){alert(\"\\u2705 \".concat(data.message));// Remove the processed request from the list\nsetSubscriptionRequests(prev=>prev.filter(req=>req.id!==requestId));// Refresh stats to reflect any tier changes\nrefreshData();}else{alert(\"\\u274C Error: \".concat(data.error));}}catch(error){console.error('Failed to process request:',error);alert('❌ Failed to process request. Please try again.');}};useEffect(()=>{// Refresh data every 30 seconds\nconst interval=setInterval(refreshData,30000);return()=>clearInterval(interval);},[]);// Fetch Entry Zone and Breakout Stocks\nuseEffect(()=>{if(activeTab==='overview'){fetch('/admin/api/entry-zone-stocks').then(res=>res.json()).then(data=>setEntryZoneStocks(data.stocks||[]));fetch('/admin/api/breakout-stocks').then(res=>res.json()).then(data=>setBreakoutStocks(data.stocks||[]));}},[activeTab]);const StatCard=_ref2=>{let{title,value,icon,color,trend}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"me-3 p-3 rounded-circle bg-\".concat(color,\" text-white\"),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas \".concat(icon,\" fa-lg\")})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title text-muted mb-1\",children:title}),/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:value}),trend&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-success\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-up\"}),\" \",trend]})]})]})})})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-1\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Welcome back, Admin\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary\",onClick:refreshData,disabled:loading,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync-alt \".concat(loading?'fa-spin':'',\" me-2\")}),\"Refresh Data\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-danger\",onClick:handleLogout,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-out-alt me-2\"}),\"Logout\"]})]})]})})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-tabs mb-4\",role:\"tablist\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"nav-link \".concat(activeTab==='overview'?'active':''),onClick:()=>setActiveTab('overview'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chart-line me-2\"}),\"Overview\"]})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"nav-link \".concat(activeTab==='users'?'active':''),onClick:()=>setActiveTab('users'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users me-2\"}),\"User Management\"]})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"nav-link \".concat(activeTab==='subscriptions'?'active':'',\" position-relative\"),onClick:()=>setActiveTab('subscriptions'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-credit-card me-2\"}),\"Subscriptions\",subscriptionRequests.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\",children:subscriptionRequests.length})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"nav-link \".concat(activeTab==='stocks'?'active':''),onClick:()=>setActiveTab('stocks'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chart-bar me-2\"}),\"Stock Management\"]})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"nav-link \".concat(activeTab==='screening'?'active':''),onClick:()=>setActiveTab('screening'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search me-2\"}),\"Stock Screening\"]})})]}),activeTab==='overview'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total Users\",value:stats.total_users,icon:\"fa-users\",color:\"primary\",trend:\"+12%\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Pro Users\",value:stats.pro_users,icon:\"fa-star\",color:\"success\",trend:\"+8%\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Medium Users\",value:stats.medium_users,icon:\"fa-gem\",color:\"info\",trend:\"+5%\"}),/*#__PURE__*/_jsx(StatCard,{title:\"Screenings\",value:stats.total_screenings,icon:\"fa-chart-bar\",color:\"warning\",trend:\"+3%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"card-title mb-0\",children:\"Entry Zone Stocks\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sector\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:entryZoneStocks.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"text-center text-muted\",children:\"No records\"})}):entryZoneStocks.map((stock,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:stock.symbol}),/*#__PURE__*/_jsx(\"td\",{children:stock.name}),/*#__PURE__*/_jsx(\"td\",{children:stock.sector}),/*#__PURE__*/_jsx(\"td\",{children:stock.price})]},stock.symbol||idx))})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"card-title mb-0\",children:\"Breakout Stocks\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sector\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:breakoutStocks.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"text-center text-muted\",children:\"No records\"})}):breakoutStocks.map((stock,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:stock.symbol}),/*#__PURE__*/_jsx(\"td\",{children:stock.name}),/*#__PURE__*/_jsx(\"td\",{children:stock.sector}),/*#__PURE__*/_jsx(\"td\",{children:stock.price})]},stock.symbol||idx))})]})})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-8 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"card-title mb-0\",children:\"User Growth\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:userGrowthData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"users\",stroke:\"#0d6efd\",strokeWidth:3}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"movingAvg\",stroke:\"red\",strokeWidth:2,strokeDasharray:\"8 4\"})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"card-title mb-0\",children:\"Subscription Distribution\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:subscriptionData,cx:\"50%\",cy:\"50%\",outerRadius:80,dataKey:\"value\",label:entry=>\"\".concat(entry.name,\": \").concat(entry.value),children:subscriptionData.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:entry.color},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{})]})})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title mb-0\",children:\"Recent Stock Screenings\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary\",onClick:()=>setActiveTab('screening'),children:\"View All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Results Found\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:screenings.map(screening=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:screening.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-primary\",children:[screening.results_count,\" stocks\"]})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(screening.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye\"})})})]},screening.id))})]})})})]})})})]}),activeTab==='requests'&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header d-flex justify-content-between align-items-center\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-crown me-2\"}),\"Pending Subscription Requests (\",subscriptionRequests.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:subscriptionRequests.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-inbox fa-3x text-muted mb-3\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-muted\",children:\"No pending requests\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"All subscription requests have been processed.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Current Plan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Requested Plan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Request Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:subscriptionRequests.map(request=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar-sm bg-primary text-white rounded-circle me-2 d-flex align-items-center justify-content-center\",children:request.user_name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"fw-medium\",children:request.user_name})]})}),/*#__PURE__*/_jsx(\"td\",{children:request.user_email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(request.current_tier==='free'?'bg-secondary':request.current_tier==='medium'?'bg-primary':'bg-warning'),children:request.current_tier.charAt(0).toUpperCase()+request.current_tier.slice(1)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(request.requested_tier==='medium'?'bg-primary':'bg-warning'),children:request.requested_tier.charAt(0).toUpperCase()+request.requested_tier.slice(1)})}),/*#__PURE__*/_jsx(\"td\",{children:request.created_at}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",role:\"group\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-success\",onClick:()=>handleSubscriptionRequest(request.id,'approve'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check me-1\"}),\"Approve\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-danger\",onClick:()=>handleSubscriptionRequest(request.id,'reject'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times me-1\"}),\"Reject\"]})]})})]},request.id))})]})})})]})})}),activeTab==='users'&&/*#__PURE__*/_jsx(UserManagementTab,{users:users,onRefresh:loadAdminData}),activeTab==='subscriptions'&&/*#__PURE__*/_jsx(SubscriptionManagementTab,{users:users,subscriptionRequests:subscriptionRequests,onRefresh:loadAdminData}),activeTab==='stocks'&&/*#__PURE__*/_jsx(StockManagementTab,{stocks:stocks,onRefresh:loadAdminData}),activeTab==='screening'&&/*#__PURE__*/_jsx(StockScreening,{})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","BarChart","Bar","PieChart","Pie","Cell","UserManagement","StockScreening","UserManagementTab","StockManagementTab","SubscriptionManagementTab","jsx","_jsx","jsxs","_jsxs","AdminDashboard","_ref","initialData","activeTab","setActiveTab","stats","setStats","users","setUsers","stocks","setStocks","subscriptionRequests","setSubscriptionRequests","loading","setLoading","screenings","setScreenings","entryZoneStocks","setEntryZoneStocks","breakoutStocks","setBreakoutStocks","COLORS","subscriptionData","name","value","free_users","color","medium_users","pro_users","userGrowthData","month","Math","floor","total_users","refreshData","loadAdminData","statsResponse","fetch","ok","_statsData$data","statsData","json","data","usersResponse","usersData","requestsResponse","requestsData","requests","stocksResponse","stocksData","screeningsResponse","screeningsData","error","console","handleLogout","mockResponse","method","window","location","href","handleSubscriptionRequest","requestId","action","response","concat","headers","alert","message","prev","filter","req","id","interval","setInterval","clearInterval","then","res","StatCard","_ref2","title","icon","trend","className","children","onClick","disabled","role","length","total_screenings","colSpan","map","stock","idx","symbol","sector","price","width","height","strokeDasharray","dataKey","type","stroke","strokeWidth","cx","cy","outerRadius","label","entry","index","fill","screening","results_count","Date","created_at","toLocaleDateString","request","user_name","charAt","toUpperCase","user_email","current_tier","slice","requested_tier","onRefresh"],"sources":["/workspaces/Trade25/frontend/src/components/admin/AdminDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar, PieChart, Pie, Cell } from 'recharts';\nimport UserManagement from './UserManagement';\nimport StockScreening from './StockScreening';\nimport UserManagementTab from './UserManagementTab';\nimport StockManagementTab from './StockManagementTab';\nimport SubscriptionManagementTab from './SubscriptionManagementTab';\n\nconst AdminDashboard = ({ initialData }) => {\n    const [activeTab, setActiveTab] = useState('overview');\n    const [stats, setStats] = useState({});\n    const [users, setUsers] = useState([]);\n    const [stocks, setStocks] = useState([]);\n    const [subscriptionRequests, setSubscriptionRequests] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [screenings, setScreenings] = useState([]);\n\n    // Entry Zone and Breakout Stocks state\n    const [entryZoneStocks, setEntryZoneStocks] = useState([]);\n    const [breakoutStocks, setBreakoutStocks] = useState([]);\n\n    const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042'];\n\n    // Prepare data for charts\n    const subscriptionData = [\n        { name: 'Free', value: stats.free_users, color: '#6c757d' },\n        { name: 'Medium', value: stats.medium_users, color: '#17a2b8' },\n        { name: 'Pro', value: stats.pro_users, color: '#28a745' },\n    ];\n\n    const userGrowthData = [\n        { month: 'Jan', users: Math.floor(stats.total_users * 0.6) },\n        { month: 'Feb', users: Math.floor(stats.total_users * 0.7) },\n        { month: 'Mar', users: Math.floor(stats.total_users * 0.8) },\n        { month: 'Apr', users: Math.floor(stats.total_users * 0.9) },\n        { month: 'May', users: stats.total_users },\n    ];\n\n\n    // Wrapper for refreshing data\n    const refreshData = () => loadAdminData();\n\n    // Load admin data on component mount\n    useEffect(() => {\n        loadAdminData();\n    }, []);\n\n    const loadAdminData = async () => {\n        setLoading(true);\n        try {\n            // Load admin statistics\n            const statsResponse = await fetch('/admin/api/dashboard-data');\n            if (statsResponse.ok) {\n                const statsData = await statsResponse.json();\n                setStats(statsData.data?.stats || {});\n            }\n\n            // Load users for management\n            const usersResponse = await fetch('/admin/api/users');\n            if (usersResponse.ok) {\n                const usersData = await usersResponse.json();\n                setUsers(usersData.users || []);\n            }\n\n            // Load subscription requests\n            const requestsResponse = await fetch('/admin/api/subscription-requests');\n            if (requestsResponse.ok) {\n                const requestsData = await requestsResponse.json();\n                setSubscriptionRequests(requestsData.requests || []);\n            }\n\n            // Load stock data\n            const stocksResponse = await fetch('/admin/api/stocks');\n            if (stocksResponse.ok) {\n                const stocksData = await stocksResponse.json();\n                setStocks(stocksData.stocks || []);\n            }\n\n            // Load recent screenings\n            const screeningsResponse = await fetch('/admin/api/recent-screenings');\n            if (screeningsResponse.ok) {\n                const screeningsData = await screeningsResponse.json();\n                setScreenings(screeningsData.screenings || []);\n            }\n        } catch (error) {\n            console.error('Failed to load admin data:', error);\n        }\n        setLoading(false);\n    };\n\n    const handleLogout = async () => {\n        try {\n            // Try mock logout first\n            const mockResponse = await fetch('/api/mock/logout', { method: 'POST' });\n            if (!mockResponse.ok) {\n                // Try admin logout\n                await fetch('/admin/logout', { method: 'POST' });\n            }\n        } catch (error) {\n            console.error('Logout failed:', error);\n        } finally {\n            // Always redirect to login\n            window.location.href = '/admin/login';\n        }\n    };\n\n    const handleSubscriptionRequest = async (requestId, action) => {\n        try {\n            const response = await fetch(`/admin/subscription-requests/${requestId}/${action}`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                }\n            });\n            \n            const data = await response.json();\n            \n            if (response.ok) {\n                alert(`✅ ${data.message}`);\n                // Remove the processed request from the list\n                setSubscriptionRequests(prev => \n                    prev.filter(req => req.id !== requestId)\n                );\n                // Refresh stats to reflect any tier changes\n                refreshData();\n            } else {\n                alert(`❌ Error: ${data.error}`);\n            }\n        } catch (error) {\n            console.error('Failed to process request:', error);\n            alert('❌ Failed to process request. Please try again.');\n        }\n    };\n\n    useEffect(() => {\n        // Refresh data every 30 seconds\n        const interval = setInterval(refreshData, 30000);\n        return () => clearInterval(interval);\n    }, []);\n\n    // Fetch Entry Zone and Breakout Stocks\n    useEffect(() => {\n        if (activeTab === 'overview') {\n            fetch('/admin/api/entry-zone-stocks')\n                .then(res => res.json())\n                .then(data => setEntryZoneStocks(data.stocks || []));\n            fetch('/admin/api/breakout-stocks')\n                .then(res => res.json())\n                .then(data => setBreakoutStocks(data.stocks || []));\n        }\n    }, [activeTab]);\n\n    const StatCard = ({ title, value, icon, color, trend }) => (\n        <div className=\"col-md-3 mb-4\">\n            <div className=\"card h-100\">\n                <div className=\"card-body\">\n                    <div className=\"d-flex align-items-center\">\n                        <div className={`me-3 p-3 rounded-circle bg-${color} text-white`}>\n                            <i className={`fas ${icon} fa-lg`}></i>\n                        </div>\n                        <div>\n                            <h6 className=\"card-title text-muted mb-1\">{title}</h6>\n                            <h3 className=\"mb-0\">{value}</h3>\n                            {trend && (\n                                <small className=\"text-success\">\n                                    <i className=\"fas fa-arrow-up\"></i> {trend}\n                                </small>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n\n    return (\n        <div className=\"container-fluid mt-4\">\n            {/* Header */}\n            <div className=\"row mb-4\">\n                <div className=\"col\">\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                            <h2 className=\"mb-1\">Admin Dashboard</h2>\n                            <p className=\"text-muted\">Welcome back, Admin</p>\n                        </div>\n                        <div className=\"d-flex gap-2\">\n                            <button \n                                className=\"btn btn-outline-primary\" \n                                onClick={refreshData}\n                                disabled={loading}\n                            >\n                                <i className={`fas fa-sync-alt ${loading ? 'fa-spin' : ''} me-2`}></i>\n                                Refresh Data\n                            </button>\n                            <button \n                                className=\"btn btn-outline-danger\" \n                                onClick={handleLogout}\n                            >\n                                <i className=\"fas fa-sign-out-alt me-2\"></i>\n                                Logout\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Navigation Tabs */}\n            <ul className=\"nav nav-tabs mb-4\" role=\"tablist\">\n                <li className=\"nav-item\">\n                    <button \n                        className={`nav-link ${activeTab === 'overview' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('overview')}\n                    >\n                        <i className=\"fas fa-chart-line me-2\"></i>Overview\n                    </button>\n                </li>\n                <li className=\"nav-item\">\n                    <button \n                        className={`nav-link ${activeTab === 'users' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('users')}\n                    >\n                        <i className=\"fas fa-users me-2\"></i>User Management\n                    </button>\n                </li>\n                <li className=\"nav-item\">\n                    <button \n                        className={`nav-link ${activeTab === 'subscriptions' ? 'active' : ''} position-relative`}\n                        onClick={() => setActiveTab('subscriptions')}\n                    >\n                        <i className=\"fas fa-credit-card me-2\"></i>Subscriptions\n                        {subscriptionRequests.length > 0 && (\n                            <span className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\n                                {subscriptionRequests.length}\n                            </span>\n                        )}\n                    </button>\n                </li>\n                <li className=\"nav-item\">\n                    <button \n                        className={`nav-link ${activeTab === 'stocks' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('stocks')}\n                    >\n                        <i className=\"fas fa-chart-bar me-2\"></i>Stock Management\n                    </button>\n                </li>\n                <li className=\"nav-item\">\n                    <button \n                        className={`nav-link ${activeTab === 'screening' ? 'active' : ''}`}\n                        onClick={() => setActiveTab('screening')}\n                    >\n                        <i className=\"fas fa-search me-2\"></i>Stock Screening\n                    </button>\n                </li>\n            </ul>\n\n            {/* Tab Content */}\n            {activeTab === 'overview' && (\n                <div>\n                    {/* Stats Cards */}\n                    <div className=\"row\">\n                        <StatCard \n                            title=\"Total Users\" \n                            value={stats.total_users} \n                            icon=\"fa-users\" \n                            color=\"primary\" \n                            trend=\"+12%\" \n                        />\n                        <StatCard \n                            title=\"Pro Users\" \n                            value={stats.pro_users} \n                            icon=\"fa-star\" \n                            color=\"success\" \n                            trend=\"+8%\" \n                        />\n                        <StatCard \n                            title=\"Medium Users\" \n                            value={stats.medium_users} \n                            icon=\"fa-gem\" \n                            color=\"info\" \n                            trend=\"+5%\" \n                        />\n                        <StatCard \n                            title=\"Screenings\" \n                            value={stats.total_screenings} \n                            icon=\"fa-chart-bar\" \n                            color=\"warning\" \n                            trend=\"+3%\" \n                        />\n                    </div>\n\n                    {/* Entry Zone Stocks Table */}\n                    <div className=\"row\">\n                        <div className=\"col-lg-6 mb-4\">\n                            <div className=\"card\">\n                                <div className=\"card-header\">\n                                    <h5 className=\"card-title mb-0\">Entry Zone Stocks</h5>\n                                </div>\n                                <div className=\"card-body\">\n                                    <div className=\"table-responsive\">\n                                        <table className=\"table table-sm\">\n                                            <thead>\n                                                <tr>\n                                                    <th>Symbol</th>\n                                                    <th>Name</th>\n                                                    <th>Sector</th>\n                                                    <th>Price</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                {entryZoneStocks.length === 0 ? (\n                                                    <tr><td colSpan=\"4\" className=\"text-center text-muted\">No records</td></tr>\n                                                ) : (\n                                                    entryZoneStocks.map((stock, idx) => (\n                                                        <tr key={stock.symbol || idx}>\n                                                            <td>{stock.symbol}</td>\n                                                            <td>{stock.name}</td>\n                                                            <td>{stock.sector}</td>\n                                                            <td>{stock.price}</td>\n                                                        </tr>\n                                                    ))\n                                                )}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        {/* Breakout Stocks Table */}\n                        <div className=\"col-lg-6 mb-4\">\n                            <div className=\"card\">\n                                <div className=\"card-header\">\n                                    <h5 className=\"card-title mb-0\">Breakout Stocks</h5>\n                                </div>\n                                <div className=\"card-body\">\n                                    <div className=\"table-responsive\">\n                                        <table className=\"table table-sm\">\n                                            <thead>\n                                                <tr>\n                                                    <th>Symbol</th>\n                                                    <th>Name</th>\n                                                    <th>Sector</th>\n                                                    <th>Price</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                {breakoutStocks.length === 0 ? (\n                                                    <tr><td colSpan=\"4\" className=\"text-center text-muted\">No records</td></tr>\n                                                ) : (\n                                                    breakoutStocks.map((stock, idx) => (\n                                                        <tr key={stock.symbol || idx}>\n                                                            <td>{stock.symbol}</td>\n                                                            <td>{stock.name}</td>\n                                                            <td>{stock.sector}</td>\n                                                            <td>{stock.price}</td>\n                                                        </tr>\n                                                    ))\n                                                )}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Charts */}\n                    <div className=\"row\">\n                        {/* User Growth Chart */}\n                        <div className=\"col-lg-8 mb-4\">\n                            <div className=\"card\">\n                                <div className=\"card-header\">\n                                    <h5 className=\"card-title mb-0\">User Growth</h5>\n                                </div>\n                                <div className=\"card-body\">\n                                    <ResponsiveContainer width=\"100%\" height={300}>\n                                        <LineChart data={userGrowthData}>\n                                            <CartesianGrid strokeDasharray=\"3 3\" />\n                                            <XAxis dataKey=\"month\" />\n                                            <YAxis />\n                                            <Tooltip />\n                                            <Line \n                                                type=\"monotone\" \n                                                dataKey=\"users\" \n                                                stroke=\"#0d6efd\" \n                                                strokeWidth={3} \n                                            />\n                                            <Line\n                                                type=\"monotone\"\n                                                dataKey=\"movingAvg\"\n                                                stroke=\"red\"\n                                                strokeWidth={2}\n                                                strokeDasharray=\"8 4\"\n                                            />\n                                        </LineChart>\n                                    </ResponsiveContainer>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Subscription Distribution */}\n                        <div className=\"col-lg-4 mb-4\">\n                            <div className=\"card\">\n                                <div className=\"card-header\">\n                                    <h5 className=\"card-title mb-0\">Subscription Distribution</h5>\n                                </div>\n                                <div className=\"card-body\">\n                                    <ResponsiveContainer width=\"100%\" height={300}>\n                                        <PieChart>\n                                            <Pie\n                                                data={subscriptionData}\n                                                cx=\"50%\"\n                                                cy=\"50%\"\n                                                outerRadius={80}\n                                                dataKey=\"value\"\n                                                label={(entry) => `${entry.name}: ${entry.value}`}\n                                            >\n                                                {subscriptionData.map((entry, index) => (\n                                                    <Cell key={`cell-${index}`} fill={entry.color} />\n                                                ))}\n                                            </Pie>\n                                            <Tooltip />\n                                        </PieChart>\n                                    </ResponsiveContainer>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Recent Screenings */}\n                    <div className=\"row\">\n                        <div className=\"col-12\">\n                            <div className=\"card\">\n                                <div className=\"card-header d-flex justify-content-between align-items-center\">\n                                    <h5 className=\"card-title mb-0\">Recent Stock Screenings</h5>\n                                    <button \n                                        className=\"btn btn-sm btn-primary\"\n                                        onClick={() => setActiveTab('screening')}\n                                    >\n                                        View All\n                                    </button>\n                                </div>\n                                <div className=\"card-body\">\n                                    <div className=\"table-responsive\">\n                                        <table className=\"table\">\n                                            <thead>\n                                                <tr>\n                                                    <th>Name</th>\n                                                    <th>Results Found</th>\n                                                    <th>Created</th>\n                                                    <th>Actions</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                {screenings.map(screening => (\n                                                    <tr key={screening.id}>\n                                                        <td>{screening.name}</td>\n                                                        <td>\n                                                            <span className=\"badge bg-primary\">\n                                                                {screening.results_count} stocks\n                                                            </span>\n                                                        </td>\n                                                        <td>{new Date(screening.created_at).toLocaleDateString()}</td>\n                                                        <td>\n                                                            <button className=\"btn btn-sm btn-outline-primary\">\n                                                                <i className=\"fas fa-eye\"></i>\n                                                            </button>\n                                                        </td>\n                                                    </tr>\n                                                ))}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Subscription Requests Tab */}\n            {activeTab === 'requests' && (\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <div className=\"card\">\n                            <div className=\"card-header d-flex justify-content-between align-items-center\">\n                                <h5 className=\"mb-0\">\n                                    <i className=\"fas fa-crown me-2\"></i>\n                                    Pending Subscription Requests ({subscriptionRequests.length})\n                                </h5>\n                            </div>\n                            <div className=\"card-body\">\n                                {subscriptionRequests.length === 0 ? (\n                                    <div className=\"text-center py-4\">\n                                        <i className=\"fas fa-inbox fa-3x text-muted mb-3\"></i>\n                                        <h5 className=\"text-muted\">No pending requests</h5>\n                                        <p className=\"text-muted\">All subscription requests have been processed.</p>\n                                    </div>\n                                ) : (\n                                    <div className=\"table-responsive\">\n                                        <table className=\"table table-hover\">\n                                            <thead className=\"table-light\">\n                                                <tr>\n                                                    <th>User</th>\n                                                    <th>Email</th>\n                                                    <th>Current Plan</th>\n                                                    <th>Requested Plan</th>\n                                                    <th>Request Date</th>\n                                                    <th>Actions</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                {subscriptionRequests.map(request => (\n                                                    <tr key={request.id}>\n                                                        <td>\n                                                            <div className=\"d-flex align-items-center\">\n                                                                <div className=\"avatar-sm bg-primary text-white rounded-circle me-2 d-flex align-items-center justify-content-center\">\n                                                                    {request.user_name.charAt(0).toUpperCase()}\n                                                                </div>\n                                                                <span className=\"fw-medium\">{request.user_name}</span>\n                                                            </div>\n                                                        </td>\n                                                        <td>{request.user_email}</td>\n                                                        <td>\n                                                            <span className={`badge ${\n                                                                request.current_tier === 'free' ? 'bg-secondary' :\n                                                                request.current_tier === 'medium' ? 'bg-primary' : 'bg-warning'\n                                                            }`}>\n                                                                {request.current_tier.charAt(0).toUpperCase() + request.current_tier.slice(1)}\n                                                            </span>\n                                                        </td>\n                                                        <td>\n                                                            <span className={`badge ${\n                                                                request.requested_tier === 'medium' ? 'bg-primary' : 'bg-warning'\n                                                            }`}>\n                                                                {request.requested_tier.charAt(0).toUpperCase() + request.requested_tier.slice(1)}\n                                                            </span>\n                                                        </td>\n                                                        <td>{request.created_at}</td>\n                                                        <td>\n                                                            <div className=\"btn-group\" role=\"group\">\n                                                                <button\n                                                                    className=\"btn btn-sm btn-success\"\n                                                                    onClick={() => handleSubscriptionRequest(request.id, 'approve')}\n                                                                >\n                                                                    <i className=\"fas fa-check me-1\"></i>Approve\n                                                                </button>\n                                                                <button\n                                                                    className=\"btn btn-sm btn-danger\"\n                                                                    onClick={() => handleSubscriptionRequest(request.id, 'reject')}\n                                                                >\n                                                                    <i className=\"fas fa-times me-1\"></i>Reject\n                                                                </button>\n                                                            </div>\n                                                        </td>\n                                                    </tr>\n                                                ))}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {activeTab === 'users' && (\n                <UserManagementTab \n                    users={users} \n                    onRefresh={loadAdminData} \n                />\n            )}\n\n            {activeTab === 'subscriptions' && (\n                <SubscriptionManagementTab \n                    users={users}\n                    subscriptionRequests={subscriptionRequests}\n                    onRefresh={loadAdminData}\n                />\n            )}\n\n            {activeTab === 'stocks' && (\n                <StockManagementTab \n                    stocks={stocks} \n                    onRefresh={loadAdminData} \n                />\n            )}\n\n            {activeTab === 'screening' && <StockScreening />}\n        </div>\n    );\n};\n\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}