{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SubscriptionManagementTab=_ref=>{let{users,subscriptionRequests,onRefresh}=_ref;const[showUpgradeModal,setShowUpgradeModal]=useState(false);const[selectedUser,setSelectedUser]=useState(null);const handleSubscriptionRequest=async(requestId,action)=>{try{const response=await fetch(\"/admin/api/subscription-requests/\".concat(requestId,\"/\").concat(action),{method:'POST',headers:{'Content-Type':'application/json'}});const data=await response.json();if(response.ok){alert(\"\\u2705 \".concat(data.message));onRefresh();}else{alert(\"\\u274C \".concat(data.error||'Failed to process request'));}}catch(error){console.error('Error processing subscription request:',error);alert('Error processing subscription request');}};const handleBulkUpgrade=async(fromTier,toTier)=>{if(!confirm(\"Upgrade all \".concat(fromTier,\" users to \").concat(toTier,\"?\")))return;try{const response=await fetch('/admin/api/bulk-upgrade',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({from_tier:fromTier,to_tier:toTier})});if(response.ok){const data=await response.json();alert(\"\\u2705 Upgraded \".concat(data.updated_count,\" users\"));onRefresh();}else{alert('Failed to perform bulk upgrade');}}catch(error){console.error('Error performing bulk upgrade:',error);alert('Error performing bulk upgrade');}};const handleManualUpgrade=async(userId,newTier)=>{try{const response=await fetch(\"/admin/api/users/\".concat(userId,\"/subscription\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({subscription_tier:newTier})});if(response.ok){alert(\"\\u2705 User subscription changed to \".concat(newTier));onRefresh();}else{alert('Failed to change subscription');}}catch(error){console.error('Error changing subscription:',error);alert('Error changing subscription');}};// Calculate subscription statistics\nconst stats={free_users:users.filter(u=>u.subscription_tier==='free').length,medium_users:users.filter(u=>u.subscription_tier==='medium').length,pro_users:users.filter(u=>u.subscription_tier==='pro').length,total_revenue:users.reduce((sum,u)=>{if(u.subscription_tier==='medium')return sum+19.99;if(u.subscription_tier==='pro')return sum+49.99;return sum;},0)};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-credit-card me-2\"}),\"Subscription Management\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>setShowUpgradeModal(true),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-up me-2\"}),\"Bulk Actions\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-muted\",children:stats.free_users}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Free Users\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-info\",children:stats.medium_users}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Medium Users\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-success\",children:stats.pro_users}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Pro Users\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"text-primary\",children:[\"$\",stats.total_revenue.toFixed(2)]}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Monthly Revenue\"})]})})})]}),subscriptionRequests.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clock me-2\"}),\"Pending Subscription Requests (\",subscriptionRequests.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Current Plan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Requested Plan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:subscriptionRequests.map(request=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:request.user_name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:request.user_email})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-secondary\",children:request.current_tier})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-primary\",children:request.requested_tier})}),/*#__PURE__*/_jsx(\"td\",{children:request.created_at}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group btn-group-sm\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-success\",onClick:()=>handleSubscriptionRequest(request.id,'approve'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"}),\" Approve\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-danger\",onClick:()=>handleSubscriptionRequest(request.id,'reject'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"}),\" Reject\"]})]})})]},request.id))})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users me-2\"}),\"All Users by Subscription\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Current Plan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Member Since\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[user.is_admin&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shield text-warning me-2\",title:\"Admin\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:user.full_name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:user.email})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(user.subscription_tier==='pro'?'bg-success':user.subscription_tier==='medium'?'bg-info':'bg-secondary'),children:user.subscription_tier.toUpperCase()})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(user.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"btn-group btn-group-sm\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-sm\",value:user.subscription_tier,onChange:e=>handleManualUpgrade(user.id,e.target.value),style:{width:'100px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"free\",children:\"Free\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pro\",children:\"Pro\"})]})})})]},user.id))})]})})})]}),showUpgradeModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal show d-block\",tabIndex:\"-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Bulk Subscription Actions\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:()=>setShowUpgradeModal(false)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Perform bulk actions on user subscriptions:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success\",onClick:()=>handleBulkUpgrade('free','medium'),children:\"Upgrade All Free \\u2192 Medium\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success\",onClick:()=>handleBulkUpgrade('free','pro'),children:\"Upgrade All Free \\u2192 Pro\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success\",onClick:()=>handleBulkUpgrade('medium','pro'),children:\"Upgrade All Medium \\u2192 Pro\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>setShowUpgradeModal(false),children:\"Close\"})})]})})})]});};export default SubscriptionManagementTab;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","SubscriptionManagementTab","_ref","users","subscriptionRequests","onRefresh","showUpgradeModal","setShowUpgradeModal","selectedUser","setSelectedUser","handleSubscriptionRequest","requestId","action","response","fetch","concat","method","headers","data","json","ok","alert","message","error","console","handleBulkUpgrade","fromTier","toTier","confirm","body","JSON","stringify","from_tier","to_tier","updated_count","handleManualUpgrade","userId","newTier","subscription_tier","stats","free_users","filter","u","length","medium_users","pro_users","total_revenue","reduce","sum","className","children","onClick","toFixed","map","request","user_name","user_email","current_tier","requested_tier","created_at","id","user","is_admin","title","full_name","email","toUpperCase","Date","toLocaleDateString","value","onChange","e","target","style","width","tabIndex","type"],"sources":["/workspaces/Trade25/frontend/src/components/admin/SubscriptionManagementTab.jsx"],"sourcesContent":["import React, { useState } from 'react';\n\nconst SubscriptionManagementTab = ({ users, subscriptionRequests, onRefresh }) => {\n    const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n    const [selectedUser, setSelectedUser] = useState(null);\n\n    const handleSubscriptionRequest = async (requestId, action) => {\n        try {\n            const response = await fetch(`/admin/api/subscription-requests/${requestId}/${action}`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                }\n            });\n            \n            const data = await response.json();\n            \n            if (response.ok) {\n                alert(`✅ ${data.message}`);\n                onRefresh();\n            } else {\n                alert(`❌ ${data.error || 'Failed to process request'}`);\n            }\n        } catch (error) {\n            console.error('Error processing subscription request:', error);\n            alert('Error processing subscription request');\n        }\n    };\n\n    const handleBulkUpgrade = async (fromTier, toTier) => {\n        if (!confirm(`Upgrade all ${fromTier} users to ${toTier}?`)) return;\n\n        try {\n            const response = await fetch('/admin/api/bulk-upgrade', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ from_tier: fromTier, to_tier: toTier })\n            });\n\n            if (response.ok) {\n                const data = await response.json();\n                alert(`✅ Upgraded ${data.updated_count} users`);\n                onRefresh();\n            } else {\n                alert('Failed to perform bulk upgrade');\n            }\n        } catch (error) {\n            console.error('Error performing bulk upgrade:', error);\n            alert('Error performing bulk upgrade');\n        }\n    };\n\n    const handleManualUpgrade = async (userId, newTier) => {\n        try {\n            const response = await fetch(`/admin/api/users/${userId}/subscription`, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ subscription_tier: newTier })\n            });\n\n            if (response.ok) {\n                alert(`✅ User subscription changed to ${newTier}`);\n                onRefresh();\n            } else {\n                alert('Failed to change subscription');\n            }\n        } catch (error) {\n            console.error('Error changing subscription:', error);\n            alert('Error changing subscription');\n        }\n    };\n\n    // Calculate subscription statistics\n    const stats = {\n        free_users: users.filter(u => u.subscription_tier === 'free').length,\n        medium_users: users.filter(u => u.subscription_tier === 'medium').length,\n        pro_users: users.filter(u => u.subscription_tier === 'pro').length,\n        total_revenue: users.reduce((sum, u) => {\n            if (u.subscription_tier === 'medium') return sum + 19.99;\n            if (u.subscription_tier === 'pro') return sum + 49.99;\n            return sum;\n        }, 0)\n    };\n\n    return (\n        <div className=\"p-4\">\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                <h4><i className=\"fas fa-credit-card me-2\"></i>Subscription Management</h4>\n                <button \n                    className=\"btn btn-primary\"\n                    onClick={() => setShowUpgradeModal(true)}\n                >\n                    <i className=\"fas fa-arrow-up me-2\"></i>Bulk Actions\n                </button>\n            </div>\n\n            {/* Subscription Stats */}\n            <div className=\"row mb-4\">\n                <div className=\"col-md-3\">\n                    <div className=\"card text-center\">\n                        <div className=\"card-body\">\n                            <h5 className=\"text-muted\">{stats.free_users}</h5>\n                            <p className=\"mb-0\">Free Users</p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-3\">\n                    <div className=\"card text-center\">\n                        <div className=\"card-body\">\n                            <h5 className=\"text-info\">{stats.medium_users}</h5>\n                            <p className=\"mb-0\">Medium Users</p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-3\">\n                    <div className=\"card text-center\">\n                        <div className=\"card-body\">\n                            <h5 className=\"text-success\">{stats.pro_users}</h5>\n                            <p className=\"mb-0\">Pro Users</p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-md-3\">\n                    <div className=\"card text-center\">\n                        <div className=\"card-body\">\n                            <h5 className=\"text-primary\">${stats.total_revenue.toFixed(2)}</h5>\n                            <p className=\"mb-0\">Monthly Revenue</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Subscription Requests */}\n            {subscriptionRequests.length > 0 && (\n                <div className=\"card mb-4\">\n                    <div className=\"card-header\">\n                        <h5 className=\"mb-0\">\n                            <i className=\"fas fa-clock me-2\"></i>\n                            Pending Subscription Requests ({subscriptionRequests.length})\n                        </h5>\n                    </div>\n                    <div className=\"card-body p-0\">\n                        <div className=\"table-responsive\">\n                            <table className=\"table table-hover mb-0\">\n                                <thead className=\"table-light\">\n                                    <tr>\n                                        <th>User</th>\n                                        <th>Current Plan</th>\n                                        <th>Requested Plan</th>\n                                        <th>Date</th>\n                                        <th>Actions</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {subscriptionRequests.map(request => (\n                                        <tr key={request.id}>\n                                            <td>\n                                                <div>\n                                                    <strong>{request.user_name}</strong>\n                                                    <br />\n                                                    <small className=\"text-muted\">{request.user_email}</small>\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <span className=\"badge bg-secondary\">\n                                                    {request.current_tier}\n                                                </span>\n                                            </td>\n                                            <td>\n                                                <span className=\"badge bg-primary\">\n                                                    {request.requested_tier}\n                                                </span>\n                                            </td>\n                                            <td>{request.created_at}</td>\n                                            <td>\n                                                <div className=\"btn-group btn-group-sm\">\n                                                    <button \n                                                        className=\"btn btn-outline-success\"\n                                                        onClick={() => handleSubscriptionRequest(request.id, 'approve')}\n                                                    >\n                                                        <i className=\"fas fa-check\"></i> Approve\n                                                    </button>\n                                                    <button \n                                                        className=\"btn btn-outline-danger\"\n                                                        onClick={() => handleSubscriptionRequest(request.id, 'reject')}\n                                                    >\n                                                        <i className=\"fas fa-times\"></i> Reject\n                                                    </button>\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Users by Subscription */}\n            <div className=\"card\">\n                <div className=\"card-header\">\n                    <h5 className=\"mb-0\">\n                        <i className=\"fas fa-users me-2\"></i>\n                        All Users by Subscription\n                    </h5>\n                </div>\n                <div className=\"card-body p-0\">\n                    <div className=\"table-responsive\">\n                        <table className=\"table table-hover mb-0\">\n                            <thead className=\"table-light\">\n                                <tr>\n                                    <th>User</th>\n                                    <th>Current Plan</th>\n                                    <th>Member Since</th>\n                                    <th>Actions</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {users.map(user => (\n                                    <tr key={user.id}>\n                                        <td>\n                                            <div className=\"d-flex align-items-center\">\n                                                {user.is_admin && <i className=\"fas fa-shield text-warning me-2\" title=\"Admin\"></i>}\n                                                <div>\n                                                    <strong>{user.full_name}</strong>\n                                                    <br />\n                                                    <small className=\"text-muted\">{user.email}</small>\n                                                </div>\n                                            </div>\n                                        </td>\n                                        <td>\n                                            <span className={`badge ${\n                                                user.subscription_tier === 'pro' ? 'bg-success' :\n                                                user.subscription_tier === 'medium' ? 'bg-info' : 'bg-secondary'\n                                            }`}>\n                                                {user.subscription_tier.toUpperCase()}\n                                            </span>\n                                        </td>\n                                        <td>{new Date(user.created_at).toLocaleDateString()}</td>\n                                        <td>\n                                            <div className=\"btn-group btn-group-sm\">\n                                                <select \n                                                    className=\"form-select form-select-sm\"\n                                                    value={user.subscription_tier}\n                                                    onChange={(e) => handleManualUpgrade(user.id, e.target.value)}\n                                                    style={{width: '100px'}}\n                                                >\n                                                    <option value=\"free\">Free</option>\n                                                    <option value=\"medium\">Medium</option>\n                                                    <option value=\"pro\">Pro</option>\n                                                </select>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n\n            {/* Bulk Actions Modal */}\n            {showUpgradeModal && (\n                <div className=\"modal show d-block\" tabIndex=\"-1\">\n                    <div className=\"modal-dialog\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\">Bulk Subscription Actions</h5>\n                                <button \n                                    type=\"button\" \n                                    className=\"btn-close\"\n                                    onClick={() => setShowUpgradeModal(false)}\n                                ></button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <p>Perform bulk actions on user subscriptions:</p>\n                                \n                                <div className=\"d-grid gap-2\">\n                                    <button \n                                        className=\"btn btn-outline-success\"\n                                        onClick={() => handleBulkUpgrade('free', 'medium')}\n                                    >\n                                        Upgrade All Free → Medium\n                                    </button>\n                                    <button \n                                        className=\"btn btn-outline-success\"\n                                        onClick={() => handleBulkUpgrade('free', 'pro')}\n                                    >\n                                        Upgrade All Free → Pro\n                                    </button>\n                                    <button \n                                        className=\"btn btn-outline-success\"\n                                        onClick={() => handleBulkUpgrade('medium', 'pro')}\n                                    >\n                                        Upgrade All Medium → Pro\n                                    </button>\n                                </div>\n                            </div>\n                            <div className=\"modal-footer\">\n                                <button \n                                    type=\"button\" \n                                    className=\"btn btn-secondary\"\n                                    onClick={() => setShowUpgradeModal(false)}\n                                >\n                                    Close\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default SubscriptionManagementTab;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}